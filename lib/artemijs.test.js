!function(e){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=e()}else{if("function"==typeof define&&define.amd){define([],e)}else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.ArtemiJS=e()}}}(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0)}if(i){return i(o,!0)}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){require("./native/Object");require("./native/Array");require("./native/Math");require("./native/Number");(function(){var ArtemiJS={version:0.1,source:"https://github.com/cojack/artemijs",license:"GPLv2",env:2};ArtemiJS.Managers={GroupManager:require("./managers/GroupManager"),PlayerManager:require("./managers/PlayerManager"),TagManager:require("./managers/TagManager"),TeamManager:require("./managers/TeamManager")};ArtemiJS.Systems={DelayedEntityProcessingSystem:require("./systems/DelayedEntityProcessingSystem"),EntityProcessingSystem:require("./systems/EntityProcessingSystem"),IntervalEntityProcessingSystem:require("./systems/IntervalEntityProcessingSystem"),IntervalEntitySystem:require("./systems/IntervalEntitySystem"),VoidEntitySystem:require("./systems/VoidEntitySystem")};ArtemiJS.Utils={Bag:require("./utils/Bag"),BitSet:require("./utils/BitSet"),HashMap:require("./utils/HashMap"),Timer:require("./utils/Timer")};ArtemiJS.Aspect=require("./Aspect");ArtemiJS.Component=require("./Component");ArtemiJS.ComponentManager=require("./ComponentManager");ArtemiJS.ComponentMapper=require("./ComponentMapper");ArtemiJS.ComponentType=require("./ComponentType");ArtemiJS.Entity=require("./Entity");ArtemiJS.EntityManager=require("./EntityManager");ArtemiJS.EntityObserver=require("./EntityObserver");ArtemiJS.EntitySystem=require("./EntitySystem");ArtemiJS.Manager=require("./Manager");ArtemiJS.World=require("./World");module.exports=ArtemiJS})()},{"./Aspect":2,"./Component":3,"./ComponentManager":4,"./ComponentMapper":5,"./ComponentType":6,"./Entity":7,"./EntityManager":8,"./EntityObserver":9,"./EntitySystem":10,"./Manager":11,"./World":12,"./managers/GroupManager":13,"./managers/PlayerManager":14,"./managers/TagManager":15,"./managers/TeamManager":16,"./native/Array":17,"./native/Math":18,"./native/Number":19,"./native/Object":20,"./systems/DelayedEntityProcessingSystem":21,"./systems/EntityProcessingSystem":22,"./systems/IntervalEntityProcessingSystem":23,"./systems/IntervalEntitySystem":24,"./systems/VoidEntitySystem":25,"./utils/Bag":26,"./utils/BitSet":27,"./utils/HashMap":28,"./utils/Timer":29}],2:[function(require,module,exports){(function(){var BitSet=require("./utils/BitSet"),ComponentType=require("./ComponentType");var Aspect=function Aspect(){var allSet=new BitSet(),exclusionSet=new BitSet(),oneSet=new BitSet();this.getAllSet=function(){return allSet};this.getExclusionSet=function(){return exclusionSet};this.getOneSet=function(){return oneSet};this.all=function(){var len=arguments.length;while(len--){allSet.set(ComponentType.getIndexFor(arguments[len]))}return this};this.exclude=function(){var len=arguments.length;while(len--){exclusionSet.set(ComponentType.getIndexFor(arguments[len]))}return this};this.one=function(type){var len=arguments.length;while(len--){oneSet.set(ComponentType.getIndexFor(arguments[len]))}return this}};Aspect.getAspectForAll=function(){var aspect=new Aspect();aspect.all(arguments);return aspect};Aspect.getAspectForOne=function(){var aspect=new Aspect();aspect.one(arguments);return aspect};Aspect.getEmpty=function(){return new Aspect()};module.exports=Aspect})()},{"./ComponentType":6,"./utils/BitSet":27}],3:[function(require,module,exports){(function(){function Component(){}module.exports=Component})()},{}],4:[function(require,module,exports){(function(){var Bag=require("./utils/Bag"),Manager=require("./Manager");var ComponentManager=function ComponentManager(){Manager.call(this);var componentsByType=new Bag(),deleted=new Bag();this.initialize=function(){};var removeComponentsOfEntity=function(entity){var componentBits=entity.getComponentBits();for(var i=componentBits.nextSetBit(0);i>=0;i=componentBits.nextSetBit(i+1)){componentsByType.get(i).set(entity.getId(),null)}componentBits.clear()};this.addComponent=function(entity,type,component){var components=componentsByType.get(type.getIndex());if(components===null){components=[];componentsByType.set(type.getIndex(),components)}components.set(entity.getId(),component);entity.getComponentBits().set(type.getIndex())};this.removeComponent=function(entity,type){if(entity.getComponentBits().get(type.getIndex())){componentsByType.get(type.getIndex()).set(entity.getId(),null);entity.getComponentBits().clear(type.getIndex())}};this.getComponentsByType=function(type){var components=componentsByType.get(type.getIndex());if(components===null){components=new Bag();componentsByType.set(type.getIndex(),components)}return components};this.getComponent=function(entity,type){var components=componentsByType.get(type.getIndex());if(components!==null){return components.get(entity.getId())}return null};this.getComponentsFor=function(entity,fillBag){var componentBits=entity.getComponentBits();for(var i=componentBits.nextSetBit(0);i>=0;i=componentBits.nextSetBit(i+1)){fillBag.add(componentsByType.get(i).get(entity.getId()))}return fillBag};this.deleted=function(entity){deleted.add(entity)};this.clean=function(){if(deleted.size()>0){for(var i=0;deleted.size()>i;i++){removeComponentsOfEntity(deleted.get(i))}deleted.clear()}}};ComponentManager.prototype=Object.create(Manager.prototype);ComponentManager.prototype.constructor=ComponentManager;module.exports=ComponentManager})()},{"./Manager":11,"./utils/Bag":26}],5:[function(require,module,exports){(function(){var Component=require("./Component"),ComponentType=require("./ComponentType");var ComponentMapper=function ComponentMapper(_type,_world){Component.call(this);var type=ComponentType.getTypeFor(_type),components=_world.getComponentManager().getComponentsByType(type);this.get=function(entity){return components.get(entity.getId())};this.getSafe=function(entity){if(components.isIndexWithinBounds(entity.getId())){return components.get(entity.getId())}return null};this.has=function(entity){return this.getSafe(entity)!==null}};ComponentMapper.getFor=function(type,world){return new ComponentMapper(type,world)};ComponentMapper.prototype=Object.create(Component.prototype);ComponentMapper.prototype.constructor=ComponentMapper;module.exports=ComponentMapper})()},{"./Component":3,"./ComponentType":6}],6:[function(require,module,exports){(function(){var HashMap=require("./utils/HashMap"),INDEX=0,componentTypes=new HashMap();var ComponentType=function ComponentType(_type){var type=_type,index=INDEX++;this.getIndex=function(){return index};this.toString=function(){return"ComponentType["+type.getSimpleName()+"] ("+index+")"}};ComponentType.getTypeFor=function(component){var _type=componentTypes.get(component);if(!_type){_type=new ComponentType(_type);componentTypes.put(component,_type)}return _type};ComponentType.getIndexFor=function(component){return this.getTypeFor(component).getIndex()};module.exports=ComponentType})()},{"./utils/HashMap":28}],7:[function(require,module,exports){(function(){var BitSet=require("./utils/BitSet"),ComponentType=require("./ComponentType");function Entity(_world,_id){var uuid,componentBits=new BitSet(),systemBits=new BitSet(),world=_world,id=_id,entityManager=world.getEntityManager(),componentManager=world.getComponentManager();reset();this.getId=function(){return id};this.getComponentBits=function(){return componentBits};this.getSystemBits=function(){return systemBits};function reset(){systemBits.clear();componentBits.clear();uuid=Math.uuid()}this.toString=function(){return"Entity ["+id+"]"};this.addComponent=function(component,type){if(!(type instanceof ComponentType)){type=ComponentType.getTypeFor(component.getClass())}componentManager.addComponent(this,type,component);return this};this.removeComponent=function(component){var componentType;if(!(component instanceof ComponentType)){componentType=ComponentType.getTypeFor(component)}else{componentType=component}componentManager.removeComponent(this,componentType)};this.isActive=function(){return entityManager.isActive(this.id)};this.isEnabled=function(){return entityManager.isEnabled(this.id)};this.getComponent=function(type){var componentType;if(!(type instanceof ComponentType)){componentType=ComponentType.getTypeFor(type)}else{componentType=type}return componentManager.getComponent(this,componentType)};this.getComponents=function(fillBag){return componentManager.getComponentsFor(this,fillBag)};this.addToWorld=function(){world.addEntity(this)};this.changedInWorld=function(){world.changedEntity(this)};this.deleteFromWorld=function(){world.deleteEntity(this)};this.enable=function(){world.enableEntity(this)};this.disable=function(){world.disableEntity(this)};this.getUuid=function(){return uuid};this.getWorld=function(){return world}}module.exports=Entity})()},{"./ComponentType":6,"./utils/BitSet":27}],8:[function(require,module,exports){(function(){var Bag=require("./utils/Bag"),BitSet=require("./utils/BitSet"),Entity=require("./Entity"),Manager=require("./Manager");var EntityManager=function EntityManager(){Manager.call(this);var entities=new Bag(),disabled=new BitSet(),active=0,added=0,created=0,deleted=0,identifierPool=new IdentifierPool();this.initialize=function(){};this.createEntityInstance=function(){var entity=new Entity(this.world,identifierPool.checkOut());++created;return entity};this.added=function(entity){++active;++added;entities.set(entity.getId(),entity)};this.enabled=function(entity){disabled.clear(entity.getId())};this.disabled=function(entity){disabled.set(entity.getId())};this.deleted=function(entity){entities.set(entity.getId(),null);disabled.clear(entity.getId());identifierPool.checkIn(entity.getId());--active;++deleted};this.isActive=function(entityId){return entities.get(entityId)!==null};this.isEnabled=function(entityId){return !disabled.get(entityId)};this.getEntity=function(entityId){return entities.get(entityId)};this.getActiveEntityCount=function(){return active};this.getTotalCreated=function(){return created};this.getTotalAdded=function(){return added};this.getTotalDeleted=function(){return deleted};function IdentifierPool(){var ids=new Bag(),nextAvailableId=0;this.checkOut=function(){if(ids.size()){return ids.removeLast()}return ++nextAvailableId};this.checkIn=function(id){ids.push(id)}}};EntityManager.prototype=Object.create(Manager.prototype);EntityManager.prototype.constructor=EntityManager;module.exports=EntityManager})()},{"./Entity":7,"./Manager":11,"./utils/Bag":26,"./utils/BitSet":27}],9:[function(require,module,exports){(function(){function EntityObserver(){this.added=function(entity){throw new Error("EntityObserver function added not implemented")};this.changed=function(entity){throw new Error("EntityObserver function changed not implemented")};this.deleted=function(entity){throw new Error("EntityObserver function deleted not implemented")};this.enabled=function(entity){throw new Error("EntityObserver function enabled not implemented")};this.disabled=function(entity){throw new Error("EntityObserver function disabled not implemented")}}module.exports=EntityObserver})()},{}],10:[function(require,module,exports){(function(){var Bag=require("./utils/Bag"),EntityObserver=require("./EntityObserver");var SystemIndexManager={INDEX:0,indices:{},getIndexFor:function(entitySystem){var index=this.indices[entitySystem];if(!index){index=this.INDEX++;this.indices[entitySystem]=index}return index}};var EntitySystem=function EntitySystem(aspect){EntityObserver.call(this);this.world=null;var systemIndex=SystemIndexManager.getIndexFor(this.getClass());var actives=new Bag();var allSet=aspect.getAllSet();var exclusionSet=aspect.getExclusionSet();var oneSet=aspect.getOneSet();var passive;var dummy=allSet.isEmpty()&&oneSet.isEmpty();var me=this;function removeFromSystem(entity){actives.remove(entity);entity.getSystemBits().clear(systemIndex);me.removed(entity)}function insertToSystem(entity){actives.add(entity);entity.getSystemBits().set(systemIndex);me.inserted(entity)}this.begin=function(){};this.process=function(){if(this.checkProcessing()){this.begin();this.processEntities(actives);this.end()}};this.end=function(){};this.processEntities=function(entities){};this.checkProcessing=function(){};this.initialize=function(){};this.inserted=function(entity){};this.removed=function(entity){};this.check=function(entity){if(dummy){return}var contains=entity.getSystemBits().get(systemIndex);var interested=true;var componentBits=entity.getComponentBits();if(!allSet.isEmpty()){for(var i=allSet.nextSetBit(0);i>=0;i=allSet.nextSetBit(i+1)){if(!componentBits.get(i)){interested=false;break}}}if(!exclusionSet.isEmpty()&&interested){interested=!exclusionSet.intersects(componentBits)}if(!oneSet.isEmpty()){interested=oneSet.intersects(componentBits)}if(interested&&!contains){insertToSystem(entity)}else{if(!interested&&contains){removeFromSystem(entity)}}};this.added=function(entity){this.check(entity)};this.changed=function(entity){this.check(entity)};this.deleted=function(entity){if(entity.getSystemBits().get(systemIndex)){removeFromSystem(entity)}};this.disabled=function(entity){if(entity.getSystemBits().get(systemIndex)){removeFromSystem(entity)}};this.enabled=function(entity){this.check(entity)};this.setWorld=function(world){this.world=world};this.isPassive=function(){return passive};this.setPassive=function(_passive){passive=_passive};this.getActives=function(){return actives}};EntitySystem.prototype=Object.create(EntityObserver.prototype);EntitySystem.prototype.constructor=EntitySystem;module.exports=EntitySystem})()},{"./EntityObserver":9,"./utils/Bag":26}],11:[function(require,module,exports){(function(){var EntityObserver=require("./EntityObserver");var Manager=function Manager(){EntityObserver.call(this);this.world=null;this.initialize=function(){};this.setWorld=function(world){this.world=world};this.getWorld=function(){return this.world};this.added=function(entity){};this.changed=function(entity){};this.deleted=function(entity){};this.enabled=function(entity){};this.disabled=function(entity){}};Manager.prototype=Object.create(EntityObserver.prototype);Manager.prototype.constructor=Manager;module.exports=Manager})()},{"./EntityObserver":9}],12:[function(require,module,exports){(function(){var EntityManager=require("./EntityManager"),ComponentManager=require("./ComponentManager"),ComponentMapper=require("./ComponentMapper"),Bag=require("./utils/Bag");function World(){console.info("Welcome to ArtemiJS, component oriented framework!");var entityManager=new EntityManager(),componentManager=new ComponentManager(),managers={},managersBag=new Bag(),systems={},systemsBag=new Bag(),added=new Bag(),changed=new Bag(),deleted=new Bag(),enable=new Bag(),disable=new Bag(),delta=0;this.initialize=function(){console.timeStamp("Managers initialization");console.groupCollapsed("Managers initialization");var i=managersBag.size();while(i--){managersBag.get(i).initialize()}i=systemsBag.size();while(i--){systemsBag.get(i).initialize()}console.groupEnd()};this.getEntityManager=function(){return entityManager};this.getComponentManager=function(){return componentManager};this.setManager=function(manager){console.timeStamp("set manager");manager.setWorld(this);managers[manager.getClass()]=manager;managersBag.add(manager);return manager};this.getManager=function(managerType){return managers[managerType]||false};this.deleteManager=function(manager){delete managers[manager.getClass()];managersBag.remove(manager)};this.setDelta=function(d){delta=d};this.getDelta=function(){return delta};this.addEntity=function(entity){added.add(entity)};this.changedEntity=function(entity){changed.add(entity)};this.deleteEntity=function(entity){added.remove(entity)};this.enableEntity=function(entity){enable.add(entity)};this.disableEntity=function(entity){disable.add(entity)};this.createEntity=function(){console.timeStamp("create entity");return entityManager.createEntityInstance()};this.getEntity=function(id){return entityManager.getEntity(id)};this.getSystems=function(){return systemsBag};this.setSystem=function(system,passive){console.timeStamp("set system");passive=passive||false;system.setWorld(this);system.setPassive(passive);systems[system.getClass()]=system;systemsBag.add(system);return system};this.getSystem=function(systemType){return systems[systemType]||false};this.deleteSystem=function(system){delete systems[system.getClass()];systemsBag.remove(system)};function notifySystems(performer,entity){console.timeStamp("notify systems");var i=systemsBag.size();while(i--){performer.perform(systemsBag.get(i),entity)}}function notifyManagers(performer,entity){console.timeStamp("notify managers");var i=managersBag.size();while(i--){performer.perform(managersBag.get(i),entity)}}function check(entities,performer){if(!entities.size()){return}var i=entities.size();while(i--){var entity=entities.get(i);notifyManagers(performer,entity);notifySystems(performer,entity)}entities.clear()}this.process=function(){console.timeStamp("process everything");check(added,{perform:function(observer,entity){observer.added(entity)}});check(changed,{perform:function(observer,entity){observer.changed(entity)}});check(disable,{perform:function(observer,entity){observer.disabled(entity)}});check(enable,{perform:function(observer,entity){observer.enabled(entity)}});check(deleted,{perform:function(observer,entity){observer.deleted(entity)}});componentManager.clean();var i=systemsBag.size();while(i--){var system=systemsBag.get(i);if(!system.isPassive()){system.process()}}};this.getMapper=function(type){return ComponentMapper.getFor(type,this)};this.setManager(componentManager);this.setManager(entityManager)}module.exports=World})()},{"./ComponentManager":4,"./ComponentMapper":5,"./EntityManager":8,"./utils/Bag":26}],13:[function(require,module,exports){(function(){var HashMap=require("./../utils/HashMap"),Bag=require("./../utils/Bag"),Manager=require("./../Manager");var GroupManager=function GroupManager(){Manager.call(this);var entitiesByGroup=new HashMap(),groupsByEntity=new HashMap();this.initialize=function(){};this.add=function(entity,group){console.assert(!!entity,"Entity is null or undefined");console.assert(group.length>0,"Group is empty");var entities=entitiesByGroup.get(group);if(entities===null){entities=new Bag();entitiesByGroup.put(group,entities)}entities.add(entity);var groups=groupsByEntity.get(entity);if(groups===null){groups=new Bag();groupsByEntity.put(entity,groups)}groups.add(group)};this.remove=function(entity,group){console.assert(!!entity,"Entity is null or undefined");console.assert(group.length>0,"Group is empty");var entities=entitiesByGroup.get(group);if(entities!==null){entities.remove(entity)}var groups=groupsByEntity.get(entity);if(groups!==null){groups.remove(group)}};this.removeFromAllGroups=function(entity){console.assert(!!entity,"Entity is null or undefined");var groups=groupsByEntity.get(entity);if(groups!==null){var i=groups.size();while(i--){var entities=entitiesByGroup.get(groups.get(i));if(entities!==null){entities.remove(entity)}}groups.clear()}};this.getEntities=function(group){console.assert(group.length>0,"Group is empty");var entities=entitiesByGroup.get(group);if(entities===null){entities=new Bag();entitiesByGroup.put(group,entities)}return entities};this.getGroups=function(entity){console.assert(!!entity,"Entity is null or undefined");return groupsByEntity.get(entity)};this.isInAnyGroup=function(entity){console.assert(!!entity,"Entity is null or undefined");return this.getGroups(entity)!==null};this.isInGroup=function(entity,group){console.assert(!!entity,"Entity is null or undefined");if(!group){return false}var groups=groupsByEntity.get(entity);var i=groups.size();while(i--){if(group===groups.get(i)){return true}}return false};this.deleted=function(entity){console.assert(!!entity,"Entity is null or undefined");this.removeFromAllGroups(entity)}};GroupManager.prototype=Object.create(Manager.prototype);GroupManager.prototype.constructor=GroupManager;module.exports=GroupManager})()},{"./../Manager":11,"./../utils/Bag":26,"./../utils/HashMap":28}],14:[function(require,module,exports){(function(){var HashMap=require("./../utils/HashMap"),Bag=require("./../utils/Bag"),Manager=require("./../Manager");var PlayerManager=function PlayerManager(){Manager.call(this);var playerByEntity=new HashMap(),entitiesByPlayer=new HashMap();this.setPlayer=function(entity,player){playerByEntity.put(entity,player);var entities=entitiesByPlayer.get(player);if(entities===null){entities=new Bag();entitiesByPlayer.put(player,entities)}entities.add(entity)};this.getEntitiesOfPlayer=function(player){var entities=entitiesByPlayer.get(player);if(entities===null){entities=new Bag()}return entities};this.removeFromPlayer=function(entity){var player=playerByEntity.get(entity);if(player!==null){var entities=entitiesByPlayer.get(player);if(entities!==null){entities.remove(entity)}}};this.getPlayer=function(entity){return playerByEntity.get(entity)};this.initialize=function(){};this.deleted=function(entity){this.removeFromPlayer(entity)}};PlayerManager.prototype=Object.create(Manager.prototype);PlayerManager.prototype.constructor=PlayerManager;module.exports=PlayerManager})()},{"./../Manager":11,"./../utils/Bag":26,"./../utils/HashMap":28}],15:[function(require,module,exports){(function(){var HashMap=require("./../utils/HashMap"),Manager=require("./../Manager");var TagManager=function TagManager(){Manager.call(this);var entitiesByTag=new HashMap(),tagsByEntity=new HashMap();this.register=function(tag,entity){entitiesByTag.put(tag,entity);tagsByEntity.put(entity,tag)};this.unregister=function(tag){tagsByEntity.remove(entitiesByTag.remove(tag))};this.isRegistered=function(tag){return entitiesByTag.containsKey(tag)};this.getEntity=function(tag){return entitiesByTag.get(tag)};this.getRegisteredTags=function(){return tagsByEntity.values()};this.deleted=function(entity){var removedTag=tagsByEntity.remove(entity);if(removedTag!==null){entitiesByTag.remove(removedTag)}};this.initialize=function(){}};TagManager.prototype=Object.create(Manager.prototype);TagManager.prototype.constructor=TagManager;module.exports=TagManager})()},{"./../Manager":11,"./../utils/HashMap":28}],16:[function(require,module,exports){(function(){var HashMap=require("./../utils/HashMap"),Bag=require("./../utils/Bag"),Manager=require("./../Manager");var TeamManager=function TeamManager(){Manager.call(this);var playersByTeam=new HashMap(),teamByPlayer=new HashMap();this.initialize=function(){};this.getTeam=function(player){return teamByPlayer.get(player)};this.setTeam=function(player,team){this.removeFromTeam(player);teamByPlayer.put(player,team);var players=playersByTeam.get(team);if(players===null){players=new Bag();playersByTeam.put(team,players)}players.add(player)};this.getPlayers=function(team){return playersByTeam.get(team)};this.removeFromTeam=function(player){var team=teamByPlayer.remove(player);if(team!==null){var players=playersByTeam.get(team);if(players!==null){players.remove(player)}}}};TeamManager.prototype=Object.create(Manager.prototype);TeamManager.prototype.constructor=TeamManager;module.exports=TeamManager})()},{"./../Manager":11,"./../utils/Bag":26,"./../utils/HashMap":28}],17:[function(require,module,exports){Array.prototype.get=function(index){return this[index]};Array.prototype.set=function(index,value){this[index]=value}},{}],18:[function(require,module,exports){Math.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16)})}},{}],19:[function(require,module,exports){Number.prototype.numberOfTrailingZeros=function(i){var x,y;if(i===0){return 64}var n=63;y=parseInt(i);if(y!==0){n=n-32;x=y}else{x=parseInt(i>>>32)}y=x<<16;if(y!==0){n=n-16;x=y}y=x<<8;if(y!==0){n=n-8;x=y}y=x<<4;if(y!==0){n=n-4;x=y}y=x<<2;if(y!==0){n=n-2;x=y}return n-((x<<1)>>>31)};Number.prototype.numberOfLeadingZeros=function(i){if(i===0){return 64}var n=1;var x=parseInt(i>>>32);if(x===0){n+=32;x=parseInt(i)}if(x>>>16==0){n+=16;x<<=16}if(x>>>24==0){n+=8;x<<=8}if(x>>>28==0){n+=4;x<<=4}if(x>>>30==0){n+=2;x<<=2}n-=x>>>31;return n}},{}],20:[function(require,module,exports){Object.defineProperty(Object.prototype,"klass",{get:function(){return this.name}});Object.prototype.getClass=function(){return this.constructor.name}},{}],21:[function(require,module,exports){(function(){var EntitySystem=require("./../EntitySystem");var DelayedEntityProcessingSystem=function DelayedEntityProcessingSystem(_aspect){EntitySystem.call(this,_aspect)};DelayedEntityProcessingSystem.prototype=Object.create(EntitySystem.prototype);DelayedEntityProcessingSystem.prototype.constructor=DelayedEntityProcessingSystem;module.exports=DelayedEntityProcessingSystem})()},{"./../EntitySystem":10}],22:[function(require,module,exports){(function(){var EntitySystem=require("./../EntitySystem");var EntityProcessingSystem=function EntityProcessingSystem(_aspect){EntitySystem.call(this,_aspect);this.innerProcess=function(entity){};this.processEntities=function(entities){var i=entities.size();while(i--){this.innerProcess(entities.get(i))}};this.checkProcessing=function(){return true}};EntityProcessingSystem.prototype=Object.create(EntitySystem.prototype);EntityProcessingSystem.prototype.constructor=EntityProcessingSystem;module.exports=EntityProcessingSystem})()},{"./../EntitySystem":10}],23:[function(require,module,exports){(function(){var EntitySystem=require("./../EntitySystem");var IntervalEntityProcessingSystem=function IntervalEntityProcessingSystem(_aspect,interval){EntitySystem.call(this,_aspect,interval);this.innerProcess=function(entity){};this.processEntities=function(entities){var i=entities.size();while(i--){this.innerProcess(entities.get(i))}}};IntervalEntityProcessingSystem.prototype=Object.create(EntitySystem.prototype);IntervalEntityProcessingSystem.prototype.constructor=IntervalEntityProcessingSystem;module.exports=IntervalEntityProcessingSystem})()},{"./../EntitySystem":10}],24:[function(require,module,exports){(function(){var EntitySystem=require("./../EntitySystem");var IntervalEntitySystem=function IntervalEntitySystem(_aspect,_interval){var acc;var interval=_interval;EntitySystem.call(this,_aspect);this.checkProcessing=function(){acc+=this.world.getDelta();if(acc>=interval){acc-=interval;return true}return false}};IntervalEntitySystem.prototype=Object.create(EntitySystem.prototype);IntervalEntitySystem.prototype.constructor=IntervalEntitySystem;module.exports=IntervalEntitySystem})()},{"./../EntitySystem":10}],25:[function(require,module,exports){(function(){var Aspect=require("./../Aspect"),EntitySystem=require("./../EntitySystem");var VoidEntitySystem=function VoidEntitySystem(_aspect){EntitySystem.call(this,Aspect.getEmpty());this.processEntities=function(entities){this.processSystem()};this.processSystem=function(){};this.checkProcessing=function(){return true}};VoidEntitySystem.prototype=Object.create(EntitySystem.prototype);VoidEntitySystem.prototype.constructor=VoidEntitySystem;module.exports=VoidEntitySystem})()},{"./../Aspect":2,"./../EntitySystem":10}],26:[function(require,module,exports){(function(){function Bag(){var data=[];var length=0;this.remove=function(index){var response=true;if(typeof index==="object"){index=data.indexOf(index)}if(typeof index==="number"&&index!==-1){response=data.splice(index,1)[0]||null;--length}else{response=null}console.assert(response!==null,"Are you sure there wasn't an element in the bag?");return response};this.removeLast=function(){if(length>0){return this.remove(length-1)}return null};this.contains=function(obj){return data.indexOf(obj)!==-1};this.removeAll=function(bag){var modified=false,n=bag.size();for(var i=0;i!==n;++i){var obj=bag.get(i);if(this.remove(obj)){modified=true}}return modified};this.get=function(index){return data[index]?data[index]:null};this.size=function(){return data.length};this.getCapacity=function(){return Number.MAX_VALUE};this.isIndexWithinBounds=function(index){return index<this.getCapacity()};this.isEmpty=function(){return length===0};this.add=function(obj){data.push(obj);++length};this.set=function(index,obj){data[index]=obj;++length};this.ensureCapacity=function(){};this.clear=function(){data.length=0;data=[];length=0};this.addAll=function(bag){var i=bag.size();while(i--){this.add(bag.get(i))}}}module.exports=Bag}())},{}],27:[function(require,module,exports){(function(){var BitSet=function BitSet(){var ADDRESS_BITS_PER_WORD=6;var BITS_PER_WORD=1<<ADDRESS_BITS_PER_WORD;var WORD_MASK=18446744073709552000;var _words=[];var _wordsInUse=0;function expandTo(wordIndex){var wordsRequired=wordIndex+1;if(_wordsInUse<wordsRequired){_wordsInUse=wordsRequired}}function wordIndex(bitIndex){return bitIndex>>ADDRESS_BITS_PER_WORD}Object.defineProperties(this,{"wordsInUse":{get:function(){return _wordsInUse}},"words":{get:function(){return _words}}});this.set=function(bitIndex){var _wordIndex=wordIndex(bitIndex);_words[_wordIndex]|=(1<<bitIndex);expandTo(_wordIndex)};this.get=function(bitIndex){var _wordIndex=wordIndex(bitIndex);return(_wordIndex<_wordsInUse)&&((_words[_wordIndex]&(1<<bitIndex))!=0)};this.clear=function(){_words=[]};this.isEmpty=function(){return _wordsInUse==0};this.intersects=function(bitSet){for(var i=Math.min(_wordsInUse,bitSet.wordsInUse)-1;i>=0;i--){if((_words[i]&bitSet.words[i])!=0){return true}}return false};this.nextSetBit=function(fromIndex){var u=wordIndex(fromIndex);if(u>=_wordsInUse){return -1}var word=_words[u]&(WORD_MASK<<fromIndex);while(true){if(word!=0){return(u*BITS_PER_WORD)+Number.numberOfTrailingZeros(word)}if(++u==_wordsInUse){return -1}word=_words[u]}}};module.exports=BitSet})()},{}],28:[function(require,module,exports){(function(){function makeCRCTable(){var c;var crcTable=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++){c=((c&1)?(3988292384^(c>>>1)):(c>>>1))}crcTable[n]=c}return crcTable}function HashMap(){var data=[];var _length=0;Object.defineProperty(this,"length",{get:function(){return _length}});if(!self.crcTable){self.crcTable=makeCRCTable()}function hash(key){var str=JSON.stringify(key);var crc=0^(-1);for(var i=0;i<str.length;i++){crc=(crc>>>8)^self.crcTable[(crc^str.charCodeAt(i))&255]}return(crc^(-1))>>>0}this.get=function(key){return data[hash(key)]||null};this.put=function(key,value){console.assert(!!key,"key is null or undefined");data[hash(key)]=value;++_length;return this};this.containsKey=function(key){return data.indexOf(hash(key))!==-1};this.remove=function(key){var idx=data.indexOf(hash(key));if(idx!==-1){data.splice(idx,1);--_length}return this};this.count=function(){return _length};this.clear=function(){data.length=0;data=[];_length=0;return this}}module.exports=HashMap})()},{}],29:[function(require,module,exports){(function(){var delay;var repeat;var acc;var done;var stopped;var Timer=function Timer(_delay,_repeat){delay=_delay;repeat=_repeat||false;acc=0;this.update=function(delta){if(!done&&!stoped){acc+=delta;if(acc>=delay){acc-=delay;if(repeat){this.reset()}else{done=true}this.execute()}}};this.reset=function(){stopped=false;done=false;acc=0};this.isDone=function(){return done};this.isRunning=function(){return !done&&acc<delay&&!stopped};this.stop=function(){stopped=true};this.setDelay=function(_delay){delay=_delay};this.execute=function(){};this.getPercentageRemaining=function(){if(done){return 100}else{if(stopped){return 0}else{return 1-(delay-acc)/delay}}};this.getDelay=function(){return delay}};module.exports=Timer})()},{}]},{},[1])(1)});